{% load static %}
<div 
    id="toast-component"
    class="fixed bottom-8 right-8 p-4 px-8 rounded-xl shadow-xl z-50 opacity-0 transition-all duration-300 translate-y-64 flex items-center gap-4 bg-white border border-gray-300 text-gray-800"
>
    <span id="toast-icon" class="text-2xl"></span>
    <div>
        <h3 class="font-bold" id="toast-title">Notifikasi</h3>
        <p class="text-sm" id="toast-message"></p>
    </div>
</div>

<script src="{% static 'js/toast.js' %}"></script>

{% if messages %}
<div id="django-messages" data-messages='[
    {% for message in messages %}
        {"type": "{{ message.tags|escapejs }}", "text": "{{ message|escapejs }}"}{% if not forloop.last %},{% endif %}
    {% endfor %}
]'></div>
{% endif %}

<script>
document.addEventListener("DOMContentLoaded", function() {
    const container = document.getElementById("django-messages");
    if (!container) return;

    const messages = JSON.parse(container.dataset.messages || "[]");

    let delay = 0;
    messages.forEach((msg) => {
        setTimeout(() => {
            showToast(msg.type, msg.text);
        }, delay);
        delay += 2000; // jeda antar pesan
    });
});
</script>
